function css_browser_selector(a){var b=a.toLowerCase(),d=function(a){return b.indexOf(a)>-1},e="gecko",f="webkit",g="safari",h="opera",i="mobile",j=document.documentElement,k=[!/opera|webtv/i.test(b)&&/msie\s(\d)/.test(b)?"ie ie"+RegExp.$1:d("firefox/2")?e+" ff2":d("firefox/3.5")?e+" ff3 ff3_5":d("firefox/3.6")?e+" ff3 ff3_6":d("firefox/3")?e+" ff3":d("gecko/")?e:d("opera")?h+(/version\/(\d+)/.test(b)?" "+h+RegExp.$1:/opera(\s|\/)(\d+)/.test(b)?" "+h+RegExp.$2:""):d("konqueror")?"konqueror":d("blackberry")?i+" blackberry":d("android")?i+" android":d("chrome")?f+" chrome":d("iron")?f+" iron":d("applewebkit/")?f+" "+g+(/version\/(\d+)/.test(b)?" "+g+RegExp.$1:""):d("mozilla/")?e:"",d("j2me")?i+" j2me":d("iphone")?i+" iphone":d("ipod")?i+" ipod":d("ipad")?i+" ipad":d("mac")?"mac":d("darwin")?"mac":d("webtv")?"webtv":d("win")?"win"+(d("windows nt 6.0")?" vista":""):d("freebsd")?"freebsd":d("x11")||d("linux")?"linux":"","js"];return c=k.join(" "),j.className+=" "+c,c}function CustomizedIFrameModal(){function a(a,b,c){var d=$(),e=!1;return!b&&(b=$(document)),a&&$.each(a,function(a,f){return $.each(b,function(b,g){var h=$(f,g);return h.size()>0&&(d=d.add(h),e=!0,c&&c(d,[a,b])),e?!1:void 0}),e?!1:void 0}),e||c&&c(d,[0,0]),d}function b(){var b='[data-focus="true"]',c=".btn-ok, .btn-cancel",d="input:enabled:not(.btn-print),textarea:enabled,select:enabled,button:enabled:not(.close,.modal-close,.btn-print)",e="a.btn:not(.close,.modal-close,.btn-print)",f=[b,c,d,e],g=[".modal-alert",".modal-page",".main-container"];a(f,g,function(a,b,c){var d=!1,e=a.filter(":visible");e.size()>0?a=e:(a=$(".modal-header"),d=!0);var f=a.filter(":first");f.is("input")||f.is("select")||f.is("button")||f.is("textarea")||(d=!0),setTimeout(function(){d&&f.attr("tabindex","0"),f.focus(),f.removeAttr("tabindex")},100)})}function c(a,b){var c=$(".modal-container.active"),d=(c.size()>0,$(a&&a.target||c));$(document).off("focusin.customized_iframe_modal").on("focusin.customized_iframe_modal",$.proxy(function(a){var b=this.attr("data-identifier"),c=$(a.target),d=c.hasClass(b.substr(1)),e=c.parents(b).length>0;if(0==d&&0==e){var f=this,g=this.find("iframe")[0];g&&(f=g.contentWindow.document.body),$(f).find(".close,.modal-close").first().trigger("focus")}},d))}function d(){$("body").hasClass("modal-page");$(document).on("keyup.dismiss.bs.modal",function(a){27==a.which&&(can_access_parent_window?window.parent.escape_key_pressed():escape_key_pressed())})}window.modals_stack=[],window.opened_modals=[];var e=this;this.modal_close_callback=null,this.modal_closed_callback=null,this.modal_open_callback=null,this.modal_opened_callback=null,this.modal_update_callback=null,this.button_element=null,this.close=function(a){window.parent&&window.parent.customized_iframe_modal_hide&&window.parent.customized_iframe_modal_hide(a)},this.update=function(a){window.parent&&window.parent.customized_iframe_modal_update&&window.parent.customized_iframe_modal_update(a)};var f="input,textarea,select,button";this.remove_modal_tab_index=function(a){$(document).off("focusin.customized_iframe_modal")},window.refocus_last_focused_element=function(){var a=$(f,".main-container").filter(":enabled:visible"),b=a.filter(":first");setTimeout(function(){document.body.focus();var a=last_focused_elements.pop();null!=a?a.focus():b[0].focus()},100)},window.escape_key_pressed=function(){for(var a=null;modals_stack.length&&0==$(a).size();)a=modals_stack.pop();setTimeout(function(){customized_iframe_modal.invoke_close({target:a})},10)},this.invoke_close=function(a){var b=e.modal_close_callback&&e.modal_close_callback.apply(e.button_element,[a.user_state]);if(b===!1||b&&b.result===!1);else{(css_browser_selector.is.firefox||css_browser_selector.is.android)&&can_access_parent_window&&window.parent&&window.parent.customized_iframe_modal__child_iframe__hide&&window.parent&&window.parent.customized_iframe_modal__child_iframe__hide({href:window.location.href});var c=a.target&&$(a.target).size()>0,d=c?a.target:function(){for(var a=null;modals_stack.length&&0==$(a).size();)a=modals_stack.pop();return a}();e.remove_modal_tab_index({target:d});var f=$(d);f.removeClass("active"),f.remove(),setTimeout(function(){0==$(".modal-container.active").size()&&$(document.body).removeClass("modal-customized")},50),d&&modals_stack[d]&&modals_stack.pop();var g=opened_modals[d]&&opened_modals[d].modal_closed_callback;g&&g.apply(e.button_element,[a.user_state]),window.resize_footable&&window.resize_footable(),refocus_last_focused_element(),delete a,delete opened_modals[d],delete d,delete f}},this.show_modal_html=function(a){var b=a.target||"",c=$("body"),d=$(b),e=d.size()>0,f=!e;if(modals_stack.push(a.target),$("body").addClass("modal-customized"),a.load_page_in_iframe){var g='<div class="modal-container"><div class="inner-backdrop"></div><div class="modal-loading-icon"><span class="icon-loading"></span></div></div>',h=$(".modal-loading-icon");f&&(d=$(g).appendTo(c),d.addClass(a.target.substr(1)),d.attr("data-identifier",a.target)),h.show();var i='<iframe tabindex="1" scrolling="'+iframe_scrolling_attribute_value+'" allowTransparency="true" style="background-color: transparent" frameborder="0" border="0" src="{0}"></iframe>',j=d.find("iframe");j.remove(),i=i.replace(/\{0\}/gi,"");var k=$(i);d.append(k);var l=a.iframe_url;k.attr("data-src",l),k.attr("src",l),k.show()}d.addClass("active")},this.show_iframe=function(a){var b=$('.modal-container[data-identifier="'+a.target+'"] iframe');b.on("load",function(){$(document).trigger("on_modal_opened.customized_iframe_modal",[b]),$(document).off("on_modal_opened.customized_iframe_modal",global_options.modal_opened_callback),c(a,!0)})},this.show=function(a){function d(a){e.modal_opened_callback&&e.modal_opened_callback.apply(e.button_element,[i])}function f(){can_access_parent_window?window.parent.customized_iframe_modal.show_iframe(a):e.show_iframe(a),d(a)}a=a||{};var g=$(this);e.button_element=this,e.modal_close_callback=window[g.data("modal-close-callback")||"___noop___"],e.modal_update_callback=window[g.data("modal-updated-callback")||"___noop___"],e.modal_open_callback=window[g.data("modal-open-callback")||"___noop___"],e.modal_opened_callback=window[g.data("modal-opened-callback")||"___noop___"],a.target=$(a.target).size()>0?a.target:"",a.target=a.target||".anonymous_modal_"+(new Date).getTime();var h=can_access_parent_window?window.parent.opened_modals:opened_modals;h[a.target]={},h[a.target].modal_closed_callback=a.modal_closed_callback||window[g.data("modal-closed-callback")||"___noop___"];var i=e.modal_open_callback&&e.modal_open_callback.apply(e.button_element);if(i===!1||i&&i.result===!1);else{a.skip_ajax=g.data("is-external-url")||global_options.is_external_url||global_options.skip_ajax;var j=g.data("iframe-url");if(j){var k=j.indexOf("?")>-1;j+=k?"&":"?"}window.modal_append_parameters&&(j+=window.modal_append_parameters()||""),global_options.append_parameters&&(j+=global_options.append_parameters()||""),a.iframe_url=j,can_access_parent_window?window.parent.customized_iframe_modal.show_modal_html(a):e.show_modal_html(a),window.scrollTo(0,0),a.load_page_in_iframe?(global_options.modal_opened_callback&&$(document).on("on_modal_opened.customized_iframe_modal",global_options.modal_opened_callback),1==a.skip_ajax?f():$.ajax({url:a.iframe_url,type:"GET",complete:function(a,b,c){f()},error:function(){e.close({target:a.target});var b=global_options.page_not_found_message||window.PAGE_NOT_FOUND_MSG||window.JAVASCRIPT_EXCEPTION_MSG||"The requested page does not exist. Please contact administrator.";display_alert_modal(b)}})):(b(),c(a,!0),d())}},this.init=function(){function a(){var a=$(document.body).height();can_access_parent_window?window.parent&&window.parent.customized_iframe_modal_loaded&&window.parent.customized_iframe_modal_loaded({page:window.location.href,height:a}):!1}window.customized_iframe_modal_hide=function(a){a=$.extend(!0,{},a),setTimeout(function(){e.invoke_close(a)},10)},window.customized_iframe_modal_update=function(a){a=$.extend(!0,{},a),setTimeout(function(){e.modal_update_callback&&e.modal_update_callback(a)},10)},a(),$(document).bind("on_ajax_completed.customized_iframe_modal",a),window.customized_iframe_modal_loaded=function(a){function b(){var a=e[0].contentWindow.document.body.offsetHeight+"px";e.height(a)}var c=$(".modal-loading-icon");c.hide();var d=(window.location.href!==a.page,$(".modal-container")),e=d.find("iframe");e.css("display","block"),css_browser_selector.is.blackberry&&(b(),setTimeout(b,100),$(e[0].contentWindow.document.body).find(".nav-tabs a").click(function(){b(),setTimeout(b,100)})),(css_browser_selector.is.firefox||css_browser_selector.is.android)&&can_access_parent_window&&window.parent&&window.parent.customized_iframe_modal__child_iframe__loaded&&window.parent&&window.parent.customized_iframe_modal__child_iframe__loaded({href:window.location.href}),window.scrollTo(0,0)},window.customized_iframe_modal__child_iframe__hide=function(a){var b=window.location.href,c=a.href,d=b!==c;d&&$(".modal-container.active iframe").attr("scrolling",iframe_scrolling_attribute_value)},window.customized_iframe_modal__child_iframe__loaded=function(a){var b=window.location.href,c=a.href,d=b!==c;d&&$(".modal-container.active iframe").attr("scrolling","no")},d(),$(".close, .modal-close",".modal-container, .modal-header, .modal-footer").click(function(a){var b=$(window.frameElement).parent().attr("data-identifier");return e.close({target:b}),a&&a.preventDefault(),!1}),b(),bind_modal_show_event()}}function bind_modal_show_event(){$("body").delegate('[data-toggle="modal"]',"click",function(a){var b=$(this),c=b.attr("data-modal-target");if(c){var d=b.data("hide-modal-close-icon"),e=b.data("title");return display_modal(null,{modal_target:c,width:990,title:e,hide_modal_close_icon:d}),!1}return last_focused_elements.push(this),customized_iframe_modal.show.apply(this,[{load_page_in_iframe:!0}]),$(this).blur(),a&&a.preventDefault(),!1})}function CustomizedDialogModal(a,b){var c="";(b.alert||b.confirm)&&(c="modal-alert");var d='<div class="modal-container {{unique_class}}">      <div class="inner-backdrop"> </div>      <div class="modal fade in" id="myModal2">         <div class="modal-dialog modal-dialog-wide">             <div class="modal-content">                 {{header}}                 <div class="modal-body">                    {{close_icon}} {{message}}                 </div>                 {{footer}}             </div>         </div>     </div> </div>',e='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',f='<div class="modal-header">{{close_icon}} <h4 class="modal-title">{{title}}</h4></div>',g='<div class="modal-footer">{{action_buttons}}</div> ',h='<button class="btn btn-xs btn-wide modal-close btn-ok">&nbsp; <i class="icon-ok"></i>&nbsp;{{text}} &nbsp;</button>',i='<button class="btn btn-xs btn-wide modal-close btn-cancel">&nbsp; <i class="icon-ban-circle"></i>&nbsp;{{text}} &nbsp;</button>',j=d;j=j.replace(/{{unique_class}}/gi,c),j=j.replace(/{{message}}/gi,a||""),f=f.replace(/{{title}}/gi,b.title||global_options.inline_modal.title||""),1==b.hide_modal_close_icon&&(e=""),b.title?(f=f.replace(/{{close_icon}}/gi,e),j=j.replace(/{{header}}/gi,f),j=j.replace(/{{close_icon}}/gi,"")):(j=j.replace(/{{close_icon}}/gi,e),j=j.replace(/{{header}}/gi,"")),b.ok_button_text=b.ok_button_text||global_options.inline_modal.ok_button_text||"OK",b.cancel_button_text=b.cancel_button_text||global_options.inline_modal.cancel_button_text||"Cancel",h=h.replace(/{{text}}/gi,b.ok_button_text),i=i.replace(/{{text}}/gi,b.cancel_button_text),g=b.alert?g.replace(/{{action_buttons}}/gi,h):b.confirm?g.replace(/{{action_buttons}}/gi,h+i):"",j=j.replace(/{{footer}}/gi,g),b.target=b.target||".anonymous_modal_"+(new Date).getTime();var k=$(j);if(k.addClass(b.target.substr(1)),k.attr("data-identifier",b.target),k.appendTo("body"),!a&&b.modal_target){var l=$(b.modal_target).children().clone();k.find(".modal-body").append(l);var m=k.find(".footable").removeClass("footable-loaded");m.footable&&m.footable({breakpoints:{tablet:860}})}b.width&&k.find(".modal-dialog").css({"max-width":b.width+"px",width:"auto"}),k.find(".close,.modal-close").click(function(a){var c=$(this).hasClass("btn-ok"),d=$(this).parents(".modal-container"),e=d.attr("data-identifier");return customized_iframe_modal.remove_modal_tab_index({target:e}),d.removeClass("active"),d.remove(),0==$(".modal-container.active").size()&&$("body").removeClass("modal-customized"),modals_stack.pop(),b.callback&&b.callback.apply(this,[c]),a&&a.preventDefault(),!1}),customized_iframe_modal.show({target:b.target})}css_browser_selector(navigator.userAgent);var __device_types=document.documentElement.className;css_browser_selector.is={},css_browser_selector.is.blackberry=__device_types.indexOf(" blackberry")>-1,css_browser_selector.is.ie8=__device_types.indexOf(" ie8")>-1,css_browser_selector.is.firefox=__device_types.indexOf(" ff")>-1,css_browser_selector.is.android=__device_types.indexOf(" android")>-1,css_browser_selector.is.mobile=__device_types.indexOf(" mobile")>-1,css_browser_selector.is.safari=__device_types.indexOf(" safari")>-1;var is_hosted_on_same_domain=!0,is_in_iframe=!1,can_access_parent_window=!1;if(window.parent!==window.self){is_in_iframe=!0;try{is_hosted_on_same_domain=window.parent.location.host||!1}catch(b){is_hosted_on_same_domain=!1}finally{is_hosted_on_same_domain=!!is_hosted_on_same_domain}}can_access_parent_window=is_hosted_on_same_domain&&is_in_iframe?!0:!1,window.last_focused_elements=can_access_parent_window?window.parent&&window.parent.last_focused_elements:[];var global_options=window.modal_global_options||{skip_ajax:!0};global_options.inline_modal=global_options.inline_modal||{},jQuery.expr[":"].notChildrenOf=function(a,b,c){return jQuery(a).parents(c[3]).length<1};var iframe_scrolling_attribute_value=css_browser_selector.is.firefox?"auto":"yes",customized_iframe_modal=new CustomizedIFrameModal;customized_iframe_modal.init(),window.show_loading=function(){var a='<div class="in loading_icon"><div class="modal-backdrop"></div><div class="modal-loading-icon"><span class="icon-loading"></span></div></div>';$("body").append(a)},window.hide_loading=function(){$(".loading_icon").remove()},window.update_modal=function(a){var b={user_state:a};customized_iframe_modal.update(b)},window.close_modal=function(a){var b={user_state:a};customized_iframe_modal.close(b)};var modal_dialogs={display_alert_modal:{title:global_options.inline_modal.alert_title||"Alert",alert:!0},display_confirm_modal:{title:global_options.inline_modal.confirm_title||"Confirm",confirm:!0},display_modal:{title:"Modal"}};$.each(modal_dialogs,function(a,b){window[a]=function(a,c){setTimeout(function(){try{1==$.isFunction(c)&&(c={callback:c}),c=c||{},c.title=c.title||b.title;var d=$.extend({},c,{alert:b.alert,confirm:b.confirm}),e=d.callback;d.callback=function(a){e&&e(a),refocus_last_focused_element()},last_focused_elements.push(document.activeElement);var f=can_access_parent_window?window.parent.CustomizedDialogModal:CustomizedDialogModal;window.existing_modal=new f(a,d)}catch(g){window.logger&&window.logger.log(g),window.console&&console.error(g)}},1)}});
//# sourceMappingURL=customized_iframe_modal.min.map